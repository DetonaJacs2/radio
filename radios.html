<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Radio Player</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
    --bg:#121212;
    --card:#1e1e1e;
    --accent:#9e9e9e;
    --text:#f1f1f1;
    --muted:#9a9a9a;
}

*{ box-sizing:border-box }

body{
    margin:0;
    height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    background:linear-gradient(145deg,#0f0f0f,#1a1a1a);
    font-family:system-ui,Segoe UI,Arial,sans-serif;
    color:var(--text);
}

.player{
    background:var(--card);
    width:360px;
    padding:26px;
    border-radius:20px;
    box-shadow:0 20px 50px rgba(0,0,0,.6);
}

.player h1{
    margin:0;
    font-size:18px;
    text-align:center;
    letter-spacing:1px;
    color:#e0e0e0;
}

.radio-display{
    background:#0b0b0b;
    border:2px solid #2c2c2c;
    border-radius:10px;
    padding:10px;
    text-align:center;
    margin:18px 0 6px;
    box-shadow:inset 0 0 12px rgba(0,0,0,.9);
}

.radio-display .label{
    display:block;
    font-size:10px;
    letter-spacing:2px;
    color:#777;
    margin-bottom:4px;
}

.station-name{
    font-size:16px;
    font-weight:600;
    color:#7cff9a;
    text-shadow:0 0 6px rgba(124,255,154,.6);
}

/* ===== VISUALIZER ===== */
.visualizer{
    display:flex;
    justify-content:center;
    align-items:flex-end;
    height:40px;
    gap:4px;
    margin-bottom:10px;
}

.visualizer{
    display:flex;
    justify-content:center;
    align-items:flex-end;
    height:24px; /* antes 40px */
    gap:4px;
    margin-bottom:10px;
}

.live-status{
    text-align:center;
    margin:10px auto 0;
    font-size:13px;
    font-weight:600;
    padding:6px 14px;
    border-radius:20px;
    width:fit-content;
    background:#333;
    color:#bbb;
    transition:.3s;
}

.live-status.live{
    background:#1c3;
    color:#002b14;
    box-shadow:0 0 10px rgba(0,255,120,.6);
}

.scale{
    display:flex;
    justify-content:space-between;
    font-size:11px;
    color:var(--muted);
    margin:16px 0 6px;
}

input[type=range]{
    width:100%;
    appearance:none;
    height:6px;
    background:#333;
    border-radius:5px;
    outline:none;
}

input[type=range]::-webkit-slider-thumb{
    appearance:none;
    width:18px;
    height:18px;
    border-radius:50%;
    background:#cfcfcf;
    cursor:pointer;
    box-shadow:0 0 8px rgba(255,255,255,.4);
}

.controls{
    display:flex;
    justify-content:center;
    margin:18px 0 10px;
}

.controls button{
    background:#2a2a2a;
    border:1px solid #3a3a3a;
    color:var(--text);
    padding:10px 18px;
    margin:0 6px;
    border-radius:12px;
    cursor:pointer;
    transition:.2s;
}

.controls button:hover{
    background:#3a3a3a;
}

.volume{
    margin-top:10px;
}

footer{
    text-align:center;
    font-size:11px;
    color:#777;
    margin-top:14px;
}
</style>
</head>

<body>

<div class="player">
    <h1>üéß RADIO PLAYER</h1>

    <div class="radio-display">
        <span class="label">ESTA√á√ÉO</span>
        <div class="station-name" id="station">---</div>
    </div>

    <div class="visualizer" id="visualizer">
        <span></span><span></span><span></span><span></span><span></span>
        <span></span><span></span><span></span><span></span><span></span>
    </div>

    <div class="live-status" id="liveStatus">PAUSADO</div>

    <div class="scale">
        <span>VOLTAR</span>
        <span>AVAN√áAR</span>
    </div>

    <input type="range" id="dial" min="0" max="12" step="1" value="0">

    <audio id="audio" preload="none" crossorigin="anonymous"></audio>

    <div class="controls">
        <button onclick="prevStation()">‚èÆ</button>
        <button onclick="play()">‚ñ∂</button>
        <button onclick="pause()">‚è∏</button>
        <button onclick="nextStation()">‚è≠</button>
        <button onclick="refreshStream()">üîÑ</button>
    </div>

    <div class="volume">
        <label style="font-size:12px;color:#aaa">Volume</label>
        <input type="range" min="0" max="1" step="0.01" value="0.8"
               oninput="audio.volume=this.value">
    </div>

    <footer>Minimal ‚Ä¢ Est√°vel ‚Ä¢ Moderno</footer>
</div>

<script>
const stations = [
 {name:"Alvorada", url:"https://27343.live.streamtheworld.com/RADIO_ALVORADAAAC.aac"},
 {name:"Jovem Pan", url:"https://8062.brasilstream.com.br/stream?ag=mp3"},
 {name:"Sertanejo",url:"https://live.hunter.fm/sertanejo_stream?ag=mp3"},
 {name:"Rock",url:"https://live.hunter.fm/rock_stream?ag=mp3"},
 {name:"Master",url:"https://live.hunter.fm/master_stream?ag=mp3"},
 {name:"MPB",url:"https://live.hunter.fm/mpb_stream?ag=mp3"},
 {name:"Gospel",url:"https://live.hunter.fm/gospel_stream?ag=mp3"},
 {name:"Hits Brasil",url:"https://live.hunter.fm/hitsbrasil_stream?ag=mp3"},
 {name:"Pop 2000",url:"https://live.hunter.fm/pop2k_stream?ag=mp3"},
 {name:"Moda Sertaneja",url:"https://live.hunter.fm/modasertaneja_stream?ag=mp3"},
 {name:"Anos 80",url:"https://live.hunter.fm/80s_stream?ag=mp3"},
 {name:"K-Pop",url:"https://live.hunter.fm/kpop_stream?ag=mp3"},
 {name:"Pisadinha",url:"https://live.hunter.fm/pisadinha_stream?ag=mp3"},
 {name:"Lo-Fi",url:"https://live.hunter.fm/lofi_stream?ag=mp3"},
 {name:"Tropical",url:"https://live.hunter.fm/tropical_stream?ag=mp3"}
];

const dial = document.getElementById("dial");
const audio = document.getElementById("audio");
const display = document.getElementById("station");
const liveStatus = document.getElementById("liveStatus");

let index = 0;
let isLive = false;

/* ===== VISUALIZER ===== */
let audioCtx, analyser, source, dataArray;
const bars = document.querySelectorAll("#visualizer span");

function setupVisualizer(){
    if(audioCtx) return;

    audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    analyser = audioCtx.createAnalyser();
    analyser.fftSize = 64;

    source = audioCtx.createMediaElementSource(audio);
    source.connect(analyser);
    analyser.connect(audioCtx.destination);

    dataArray = new Uint8Array(analyser.frequencyBinCount);
    animateBars();
}

function animateBars(){
    requestAnimationFrame(animateBars);
    if(!analyser) return;

    analyser.getByteFrequencyData(dataArray);

    bars.forEach((bar, i) => {
        const value = dataArray[i] || 0;
        bar.style.height = Math.max(6, value / 2) + "px";
    });
}

/* ===== PLAYER ===== */
function loadStation(i, autoplay=true){
    index = (i + stations.length) % stations.length;
    audio.pause();
    audio.src = stations[index].url + "?t=" + Date.now();
    display.innerText = stations[index].name;
    dial.value = index;
    isLive = true;
    setLive(true);
    if(autoplay) audio.play();
}

function setLive(live){
    liveStatus.textContent = live ? "üî¥ AO VIVO" : "PAUSADO";
    liveStatus.classList.toggle("live", live);
}

function play(){
    audio.play();
}

function pause(){
    audio.pause();
    isLive = false;
    setLive(false);
}

function nextStation(){ loadStation(index + 1); }
function prevStation(){ loadStation(index - 1); }
function refreshStream(){ loadStation(index, true); }

dial.addEventListener("input", () => loadStation(+dial.value));

audio.addEventListener("play", () => {
    setupVisualizer();
    if(audioCtx.state === "suspended") audioCtx.resume();
});

audio.addEventListener("error", () => {
    isLive = false;
    setLive(false);
});

loadStation(0, false);

</script>

<script>
/* ===== MEDIA SESSION (FONE / ACESSIBILIDADE) ===== */
if ('mediaSession' in navigator) {

    function updateMediaSession() {
        navigator.mediaSession.metadata = new MediaMetadata({
            title: stations[index].name,
            artist: "Radio Player",
            album: "Ao Vivo",
            artwork: [
                { src: "https://cdn-icons-png.flaticon.com/512/727/727245.png", sizes: "512x512", type: "image/png" }
            ]
        });
    }

    navigator.mediaSession.setActionHandler('play', () => {
        play();
        updateMediaSession();
    });

    navigator.mediaSession.setActionHandler('pause', () => {
        pause();
    });

    navigator.mediaSession.setActionHandler('previoustrack', () => {
        prevStation();
        updateMediaSession();
    });

    navigator.mediaSession.setActionHandler('nexttrack', () => {
        nextStation();
        updateMediaSession();
    });

    navigator.mediaSession.setActionHandler('stop', () => {
        pause();
    });

    audio.addEventListener("play", updateMediaSession);
}
</script>


</body>
</html>
